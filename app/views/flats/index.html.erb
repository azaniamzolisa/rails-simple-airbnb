<div class="container mt-5">
  <h1>All Available Flats</h1>
  <%= form_with url: flats_path, method: :get, local: true do %>
    <div class="input-group mb-3">
      <%= text_field_tag :query, params[:query], class: 'form-control', placeholder: 'Search flats...' %>
      <button class="btn btn-outline-secondary" type="submit">Search</button>
    </div>
  <% end %>

  <div class="row">
    <% @flats.each do |flat| %>
      <div class="col-md-4">
        <div class="card mb-4">
          <%= image_tag flat.picture_url, class: 'card-img-top', alt: flat.name %>
          <div class="card-body">
            <h5 class="card-title"><%= flat.name %></h5>
            <p class="card-text"><%= flat.description %></p>
            <p class="card-text"><small class="text-muted"><%= flat.address %></small></p>
            <p class="card-text"><strong>Â£<%= flat.price_per_night %> per night</strong></p>
            <%= link_to 'View Details', flat_path(flat), class: 'btn btn-primary' %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
